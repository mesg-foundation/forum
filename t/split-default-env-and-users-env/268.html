<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Split default env and user&#39;s env - Development - MESG Community</title>
    <meta name="description" content="Right now, user’s env (passed with commands) are overriding default env (the one in the mesg.yml). 
The problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="268.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Split default env and user&#39;s env&#39;" href="268.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/split-default-env-and-users-env/268" />
<meta name="twitter:url" content="https://forum.mesg.com/t/split-default-env-and-users-env/268" />
<meta property="og:title" content="Split default env and user&#39;s env" />
<meta name="twitter:title" content="Split default env and user&#39;s env" />
<meta property="og:description" content="Right now, user’s env (passed with commands) are overriding default env (the one in the mesg.yml).  The problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in the protobuf service definition.  One solution will be to no override the default env but simply to have a dedicated arrays to store them outside the service definition (as “metadata”).  Like this, the service definition will holds the default env defined by the mesg.yml that ca..." />
<meta name="twitter:description" content="Right now, user’s env (passed with commands) are overriding default env (the one in the mesg.yml).  The problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in the protobuf service definition.  One solution will be to no override the default env but simply to have a dedicated arrays to store them outside the service definition (as “metadata”).  Like this, the service definition will holds the default env defined by the mesg.yml that ca..." />
<meta property="article:published_time" content="2019-04-10T00:29:36+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Split default env and user's env","mainEntity":{"@type":"Question","name":"Split default env and user's env","text":"Right now, user’s env (passed with commands) are overriding default env (the one in the mesg.yml).\n\nThe problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in the protobuf service definition.\n\nOne solution will be to no override the defau&hellip;","upvoteCount":0,"answerCount":1,"dateCreated":"2019-04-10T00:29:36.132Z","author":{"@type":"Person","name":"Nicolas"},"acceptedAnswer":{"@type":"Answer","text":"This has been implemented with the instances. A service has now multiple instances based on env variable that are hashed and stored. No env variables are saved, only the hash that combine them.","upvoteCount":0,"dateCreated":"2019-12-26T02:03:15.108Z","url":"https://forum.mesg.com/t/split-default-env-and-users-env/268/4","author":{"@type":"Person","name":"Anthony"}}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="268.html">Split default env and user&#39;s env</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="268.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-10T00:29:36Z' class='post-time'>
                April 10, 2019, 12:29am
              </time>
              <meta itemprop='dateModified' content='2019-04-10T00:29:36Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Right now, user’s env (passed with commands) are overriding default env (the one in the <code>mesg.yml</code>).<br>
The problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in the protobuf service definition.</p>
<p>One solution will be to no override the default env but simply to have a dedicated arrays to store them outside the service definition (as “metadata”).<br>
Like this, the service definition will holds the default env defined by the mesg.yml that can be exposed to the network.</p>
<p>Draft todo:</p>
<ul>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> do not override default env with user’s in <code>service.New</code>
</li>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> store user’s env somewhere<br>
<a href="https://github.com/mesg-foundation/core/blob/dev/service/service.go#L104" rel="nofollow noopener">https://github.com/mesg-foundation/core/blob/dev/service/service.go#L104</a>
</li>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> add envs to <code>definition.dependency</code><br>
<a href="https://github.com/mesg-foundation/core/blob/dev/protobuf/definition/service.proto#L55" rel="nofollow noopener">https://github.com/mesg-foundation/core/blob/dev/protobuf/definition/service.proto#L55</a>
</li>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> do the mapping from dependency proto to service<br>
<a href="https://github.com/mesg-foundation/core/blob/047d33101171a1e67b72a45137851c13976eec71/interface/grpc/core/core.go#L97" rel="nofollow noopener">https://github.com/mesg-foundation/core/blob/047d33101171a1e67b72a45137851c13976eec71/interface/grpc/core/core.go#L97</a>
</li>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> [dependant on <a href="https://github.com/mesg-foundation/core/pull/860" rel="nofollow noopener">#860</a>] add envs to <code>definition.configuration</code>
</li>
<li>
<span class="chcklst-box fa fa-square-o fa-fw"></span> [dependant on <a href="https://github.com/mesg-foundation/core/pull/860" rel="nofollow noopener">#860</a>] do the mapping from dependency proto to service</li>
</ul>
        </div>

        <meta itemprop='headline' content='Split default env and user&#39;s env'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="268.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-04-11T07:11:39Z'>
              <time itemprop='dateModified' datetime='2019-04-11T12:46:02Z' class='post-time'>
                April 11, 2019, 12:46pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I shared my ideas about this before, I don’t think that we should keep env variables on deploy time. It should be moved to start time of services. These kind of configurations are specific to user of service, a service deployed with user’s configuration is unlikely to be used by others and cannot be published on marketplace because of our policies.</p>
        </div>

        <meta itemprop='headline' content='Split default env and user&#39;s env'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/krhubert.html'><span itemprop='name'>krhubert</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="268.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-04-15T06:27:07Z' class='post-time'>
                April 15, 2019,  6:27am
              </time>
              <meta itemprop='dateModified' content='2019-04-15T06:27:07Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-team" data-post="1" data-topic="268">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/nicolas/40/10_2.png" class="avatar"> Nicolas:</div>
<blockquote>
<p>The problem is user’s env should be considered as sensitive data (cannot be exposed publicly). So, we cannot add them in the protobuf service definition.</p>
</blockquote>
</aside>
<p>Can’t we just not display them?</p>
        </div>

        <meta itemprop='headline' content='Split default env and user&#39;s env'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="268.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-12-26T02:03:15Z'>
              <time itemprop='dateModified' datetime='2019-12-26T02:03:17Z' class='post-time'>
                December 26, 2019,  2:03am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This has been implemented with the <code>instances</code>. A service has now multiple instances based on env variable that are hashed and stored. No env variables are saved, only the hash that combine them.</p>
        </div>

        <meta itemprop='headline' content='Split default env and user&#39;s env'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
