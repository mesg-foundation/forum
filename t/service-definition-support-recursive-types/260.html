<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Service definition: support recursive types - Engine - MESG Community</title>
    <meta name="description" content="We need to support recursive types in order to have type definitions on child fields of an object type where child fields referring to its parental type. 
This is the current syntax that doesn’t support recursive types. &amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="260.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Service definition: support recursive types&#39;" href="260.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/service-definition-support-recursive-types/260" />
<meta name="twitter:url" content="https://forum.mesg.com/t/service-definition-support-recursive-types/260" />
<meta property="og:title" content="Service definition: support recursive types" />
<meta name="twitter:title" content="Service definition: support recursive types" />
<meta property="og:description" content="We need to support recursive types in order to have type definitions on child fields of an object type where child fields referring to its parental type.  This is the current syntax that doesn’t support recursive types. Please see comments in the yml below:  events:   query:     data:       fields:         repeated: true         type: Object         object: # field           name:             type: String           fields: # fields is actually type &#39;fields&#39; *recursive*             type: Any     ..." />
<meta name="twitter:description" content="We need to support recursive types in order to have type definitions on child fields of an object type where child fields referring to its parental type.  This is the current syntax that doesn’t support recursive types. Please see comments in the yml below:  events:   query:     data:       fields:         repeated: true         type: Object         object: # field           name:             type: String           fields: # fields is actually type &#39;fields&#39; *recursive*             type: Any     ..." />
<meta property="article:published_time" content="2019-02-19T18:56:11+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Service definition: support recursive types","mainEntity":{"@type":"Question","name":"Service definition: support recursive types","text":"We need to support recursive types in order to have type definitions on child fields of an object type where child fields referring to its parental type.\n\nThis is the current syntax that doesn’t support recursive types. Please see comments in the yml below:\n\nevents:\n\nquery:\n\ndata:\n\nfields:\n\n&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2019-02-19T18:56:11.457Z","author":{"@type":"Person","name":"İlker"}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="260.html">Service definition: support recursive types</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/engine.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Engine</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-02-19T18:56:11Z'>
              <time itemprop='dateModified' datetime='2019-02-19T19:02:31Z' class='post-time'>
                February 19, 2019,  7:02pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>We need to support recursive types in order to have type definitions on child fields of an <code>object</code> type where child fields referring to its parental type.</p>
<p>This is the current syntax that doesn’t support recursive types. Please see comments in the yml below:</p>
<pre><code class="lang-auto">events:
  query:
    data:
      fields:
        repeated: true
        type: Object
        object: # field
          name:
            type: String
          fields: # fields is actually type 'fields' *recursive*
            type: Any
          args:
            type: Object
            repeated: true
            object:
              name:
                type: String
              value:
                type: String
</code></pre>
<p>I’m thinking about having a syntax like below to support recursive types:</p>
<pre><code class="lang-auto">events:
  query:
    data:
      fields:
        name: fields
        repeated: true
        type: Object
        object:
          name:
            type: String
          fields: +fields
          args:
            type: Object
            repeated: true
            object:
              name:
                type: String
              value:
                type: String
</code></pre>
<p>So with the syntax above, we’re introducing a new key called <code>name</code> in the parameter type while also supporting special values in field values to identify <strong>named values</strong> by checking for <code>+</code> sign.</p>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-21T04:42:48Z' class='post-time'>
                February 21, 2019,  4:42am
              </time>
              <meta itemprop='dateModified' content='2019-02-21T04:42:48Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t see the necessity for this feature. Could you provide an concrete example?</p>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T09:36:39Z' class='post-time'>
                February 25, 2019,  9:36am
              </time>
              <meta itemprop='dateModified' content='2019-02-25T09:36:39Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’m not a big fan of that, I don’t think we should support recursive data, it makes things really complicated and data are never really recursive you can always define the schema and if it’s really recursive it makes more sense to me to call this task multiple time, having a loop on the outputs.</p>
<p>Same as Nico, I would like to see a concrete use case of that to convince me <img src="../../images/emoji/twitter/slight_smile.png%3Fv=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-02-25T11:38:51Z'>
              <time itemprop='dateModified' datetime='2019-02-25T11:46:50Z' class='post-time'>
                February 25, 2019, 11:46am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ve a real world need for this please check fields section in <a href="https://github.com/ilgooz/service-graphql/blob/master/mesg.yml#L17" rel="nofollow noopener">service-graphql</a>.</p>
<p><code>query</code> event is emitted with wanted fields on every GraphQL Query request. A query request looks like below:</p>
<pre><code class="lang-auto"> { services { sid, owner, versions { hash }  } }
</code></pre>
<p>As you can see, in this example, a query is consist of nested objects(fields) and every field might have child fields. And nesting level for each field is unknown, in other words, it’s dynamic.</p>
<p>We need to implement this proposal in order to have -nested- typed  query fields. Otherwise we’re going to end up having typed fields for only one(root) level.</p>
<p>I don’t see any reason to not implement this, I think implementation wouldn’t be complicated, we just need to wrap the current logic inside a recursive func.</p>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-26T07:21:27Z' class='post-time'>
                February 26, 2019,  7:21am
              </time>
              <meta itemprop='dateModified' content='2019-02-26T07:21:27Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t see the recursion here. You talk about the nested and this is done with the type object already</p>
<pre><code class="lang-auto">nested1:
  type: Object
  object:
    nested2:
      type: Object
      object:
        ...
</code></pre>
<p>You can add different level of nested like that so you are not limited to the root. Of course you have to define all the nested but I don’t really see the value of having an unlimited nested.</p>
<p>This might also help, I’m not 100% sure of the syntax but using the yaml variables but I think here you will have some issues when parsing this (kind of infinite loop)</p>
<pre><code class="lang-auto">nested1: &amp;nested
  type: Object
  object:
    &lt;&lt;: *nested
</code></pre>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-26T07:49:44Z' class='post-time'>
                February 26, 2019,  7:49am
              </time>
              <meta itemprop='dateModified' content='2019-02-26T07:49:44Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>By nested, I was talking about having recursively nested types. Not nested types by itself. I think, there is value having recursively nested types because otherwise, child fields are never typed.</p>
<p>The syntax you provide for the yml parser won’t work because it’s an infinite loop and since yml parsers generates a static output from yml syntax, it’s not possible for them to generate an output for recursive definitions.</p>
<p>So if we want to have this feature, we need to do it on our side with a new syntax to let devs to define recursive types virtually.</p>
        </div>

        <meta itemprop='headline' content='Service definition: support recursive types'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
