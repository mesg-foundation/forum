<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Instance DB - Engine - MESG Community</title>
    <meta name="description" content="The goal of this feature is to split the Service DB into Service DB and Instance DB. 
The Service DB will only store the service definitions. Its primary index is the hash of the service definition, calculated by the Eng&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="295.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Instance DB&#39;" href="295.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/instance-db/295" />
<meta name="twitter:url" content="https://forum.mesg.com/t/instance-db/295" />
<meta property="og:title" content="Instance DB" />
<meta name="twitter:title" content="Instance DB" />
<meta property="og:description" content="The goal of this feature is to split the Service DB into Service DB and Instance DB.  The Service DB will only store the service definitions. Its primary index is the hash of the service definition, calculated by the Engine, called Service Hash.  The Instance DB will store the info of the actual running services (docker services / containers IDs, networks IDs, but also Service Definition Hash). Its primary index is the hash of the service definition + the custom env, calculated by the Engine, ca..." />
<meta name="twitter:description" content="The goal of this feature is to split the Service DB into Service DB and Instance DB.  The Service DB will only store the service definitions. Its primary index is the hash of the service definition, calculated by the Engine, called Service Hash.  The Instance DB will store the info of the actual running services (docker services / containers IDs, networks IDs, but also Service Definition Hash). Its primary index is the hash of the service definition + the custom env, calculated by the Engine, ca..." />
<meta property="article:published_time" content="2019-05-30T07:41:51+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Instance DB","mainEntity":{"@type":"Question","name":"Instance DB","text":"The goal of this feature is to split the Service DB into Service DB and Instance DB.\n\nThe Service DB will only store the service definitions. Its primary index is the hash of the service definition, calculated by the Engine, called Service Hash.\n\nThe Instance DB will store the info of the actual run&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2019-05-30T07:41:50.821Z","author":{"@type":"Person","name":"Nicolas"}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="295.html">Instance DB</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/engine.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Engine</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-05-30T07:41:51Z'>
              <time itemprop='dateModified' datetime='2019-06-03T03:49:03Z' class='post-time'>
                June 3, 2019,  3:49am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The goal of this feature is to split the Service DB into Service DB and Instance DB.</p>
<p>The Service DB will only store the service definitions. Its primary index is the hash of the service definition, calculated by the Engine, called Service Hash.</p>
<p>The Instance DB will store the info of the actual running services (docker services / containers IDs, networks IDs, but also Service Definition Hash). Its primary index is the hash of the service definition + the custom env, calculated by the Engine, called Instance Hash.</p>
<p><strong>Note on custom env</strong>: the custom env are NOT stored in any DB but are used for the calculation of the instance hash AND injected in the docker service on start.</p>
<p>Let’s see the full start and stop processes:</p>
<h2>Start (service hash, env) -&gt; instance hash</h2>
<p>This api is similar to the current start api except that it will download and build the service, create and save in instance DB the container related info.</p>
<p>The steps of this api are:</p>
<ul>
<li>Fetch service definition from service hash in Service DB</li>
<li>Download the service source</li>
<li>Build the docker image</li>
<li>Merge custom user env</li>
<li>Calculate Instance Hash (based on the service hash and the custom env)</li>
<li>Check if Instance Hash already exist. If not, then:</li>
<li>Save the Instance object in Instance DB</li>
<li>Start the Service docker services</li>
<li>Update Instance DB with the docker services / containers / networks IDs</li>
<li>Return Instance Hash</li>
</ul>
<h2>Stop (instance hash)</h2>
<p>This is basically the same as the current implementation except it’s using instance db.</p>
<ul>
<li>Check if Instance Hash already exist. If yes, then:</li>
<li>Stop the docker services</li>
<li>Wait for the docker containers to be removed / deleting the docker containers</li>
<li>Delete the networks</li>
<li>Delete the instance from Instance DB</li>
</ul>
<h2>Delete (service hash)</h2>
<p>The only difference with current implementation is this api has to return an error if any instance referencing the service hash exist. The user have to stop the instances first.</p>
<h1>Note</h1>
<p>Now that Service DB only stores “static” data, it can be used to synchronise / publish Service Definition across the Network and can replace the current Marketplace running on Ethereum.</p>
<p>Another very important modification is all APIs that are requiring a Service ID to use a running Service (listenEvent, listenTask, executeTask, StopService) will now use the instance hash instead of the service hash. Be careful, this is only for running service, for example, the API DeleteService should delete in ServiceDB thus using the Service Hash.</p>
<h1>Schema</h1>
<p><em>In orange, step that are different than current implementation.</em></p>
<h2>Start schema</h2>
<div class="mermaid">

graph TD
1[Fetch service definition from service hash in Service DB] --&gt; 2
2[Download the service source] --&gt; 3
3[Build the docker image] --&gt; 4
4[Merge custom user env] --&gt; 5
5[Calculate Instance Hash] --&gt; 6
6{Check if Instance Hash already exist} -- if not --&gt; 7
6 -- if yes --&gt; error
7[Save the Instance object in Instance DB] --&gt; 8
8[Start the Service docker services] --&gt; 9
9[Update Instance DB with the docker services / containers / networks IDs] --&gt; 10
10[Return Instance Hash]
error[return error]
classDef diff fill:orange;
class 2,3,5,6,7,9,10 diff;

</div>

<h2>Stop schema</h2>
<div class="mermaid">

graph TD
1{Check if Instance Hash already exist} -- if yes --&gt; 2
1 -- if no --&gt; error
error
2[Stop the docker services] --&gt; 3
3[Wait for the docker containers to be removed / deleting the docker containers] --&gt; 4
4[Delete the networks] --&gt; 5
5[Delete the instance from Instance DB]
classDef diff fill:orange;
class 1,5 diff;

</div>

<h1>gRPC definition, server &amp; sdk</h1>
<p>As <a href="../service-compilation-deploy/288.html" class="inline-onebox">Service compilation &amp; deploy</a>, this feature should not modify any existing gRPC definition, server or sdk functions but rather create new ones to start from a fresh and clean mind even if code duplication is necessary <img src="../../images/emoji/twitter/wink.png%3Fv=9" title=":wink:" class="emoji" alt=":wink:"></p>
<p>Edit <span class="hashtag">#1</span></p>
<p>This new gRPC api should be created in  <code>/protobuf/api/instance.proto</code>  and contain the following protobuf def:</p>
<pre><code class="lang-auto">syntax = "proto3";

package api;

service Instance {
  rpc Create (CreateRequest) returns (string) {}
  rpc Delete (string) returns (string) {}
}

message CreateRequest {
  string serviceHash = 1;
  repeated string env = 2;
}
</code></pre>
<p>This api Instance will only manage resources in Instance DB and use a CRUD-like design.</p>
        </div>

        <meta itemprop='headline' content='Instance DB'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../service-compilation-deploy/288.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/service-compilation-deploy/288'>
                      <meta itemprop='position' content='1'>
                      <span itemprop='name'>Service compilation &amp; deploy</span>
                    </a>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../protobuf-folder-structure/297.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/protobuf-folder-structure/297'>
                      <meta itemprop='position' content='2'>
                      <span itemprop='name'>Protobuf folder structure</span>
                    </a>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/krhubert.html'><span itemprop='name'>krhubert</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-30T12:50:47Z' class='post-time'>
                May 30, 2019, 12:50pm
              </time>
              <meta itemprop='dateModified' content='2019-05-30T12:50:47Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-team" data-post="1" data-topic="295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/nicolas/40/10_2.png" class="avatar"> Nicolas:</div>
<blockquote>
<p>Bob starts Service A by sending SDa to the Engine. The Engine is:</p>
</blockquote>
</aside>
<p>Why? Shouldn’t be bob starts the service by sending <code>service hash</code>, why core needs to redeploy the service every time?</p>
<p>What is the pros of passing SD to deploy? When we have decided to drop deploy api?</p>
<p>Why you can’t run two same SD with same custom env?</p>
<aside class="quote group-team" data-post="1" data-topic="295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/nicolas/40/10_2.png" class="avatar"> Nicolas:</div>
<blockquote>
<p>Another very important modification is all APIs that are requiring a Service ID to use a running Service (listenEvent, listenTask, executeTask, StopService) will now use the instance hash instead of the service hash.</p>
</blockquote>
</aside>
<p>What if I wan’t to delete all runnign instance of given service no metter what custom envs are?</p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-31T07:08:40Z' class='post-time'>
                May 31, 2019,  7:08am
              </time>
              <meta itemprop='dateModified' content='2019-05-31T07:08:40Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-team" data-post="2" data-topic="295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/krhubert/40/9_2.png" class="avatar"> krhubert:</div>
<blockquote>
<p>Why you can’t run two same SD with same custom env?</p>
</blockquote>
</aside>
<p>This is because of future decentralized network and deterministic hash calculation.<br>
Two node should create the same instance hash from the same service definition and the same env variables.</p>
<aside class="quote group-team" data-post="2" data-topic="295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/krhubert/40/9_2.png" class="avatar"> krhubert:</div>
<blockquote>
<p>What if I wan’t to delete all runnign instance of given service no metter what custom envs are?</p>
</blockquote>
</aside>
<p>In this case, you will use a list instance api that returns the instance hash of each instance and pass them to the stop instance api</p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-06-03T20:38:08Z'>
              <time itemprop='dateModified' datetime='2019-06-03T20:38:27Z' class='post-time'>
                June 3, 2019,  8:38pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Should we calc service hash from env+service def hash or env+docker image hash. The second seems more precise to me since the built image might actually contain different dependencies when their versions aren’t fixed by the dev in Dockerfile.</p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-04T02:39:44Z' class='post-time'>
                June 4, 2019,  2:39am
              </time>
              <meta itemprop='dateModified' content='2019-06-04T02:39:44Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>env+docker image hash is not possible yet as docker doesn’t generate deterministic image hash.<br>
This might be solved later on and when we can make sure that docker builds are deterministic then yes <code>instance hash = hash(definition, env, docker build)</code> but for now <code>instance hash = hash(definition, env)</code></p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-06-04T02:45:33Z'>
              <time itemprop='dateModified' datetime='2019-06-04T02:46:56Z' class='post-time'>
                June 4, 2019,  2:46am
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-team" data-post="5" data-topic="295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.mesg.com/anthony/40/7_2.png" class="avatar"> Anthony:</div>
<blockquote>
<p>for now <code>instance hash = hash(definition, env)</code></p>
</blockquote>
</aside>
<p>small correction:<br>
<code>service hash = hash(definition, source files)</code><br>
<code>instance hash = hash(service hash, env)</code></p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../service-compilation-deploy/288/3.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/service-compilation-deploy/288/3'>
                      <meta itemprop='position' content='1'>
                      <span itemprop='name'>Service compilation &amp; deploy</span>
                    </a>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="295.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-06T07:38:47Z' class='post-time'>
                June 6, 2019,  7:38am
              </time>
              <meta itemprop='dateModified' content='2019-06-06T07:38:47Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As requested by <a class="mention" href="../../u/ilgooz.html">@ilgooz</a>, here is the explanation about service or instance status.</p>
<ul>
<li>Service status: simply remove it. A service is not directly related to any docker container. So it there is no logic that a service has a status.</li>
<li>Instance status: very similar to the current service’s status. It needs to fetch the docker api to get the status of each related docker container, aggregate to one status (like it’s currently done for service’s status).</li>
</ul>
<p>So basically, service’s status is moved to instance’s status.</p>
        </div>

        <meta itemprop='headline' content='Instance DB'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
