<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Make a websocket server to expose the APIs - Engine - MESG Community</title>
    <meta name="description" content="From @Anthony https://github.com/mesg-foundation/core/issues/277 
Right now the API is using gRPC with some streams and streams cannot be used in a client side directly. gRPC is planning to support that but in few months&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="150.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Make a websocket server to expose the APIs&#39;" href="150.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/325991bd6440c2107d46da006016935a386215d1.jpeg" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/325991bd6440c2107d46da006016935a386215d1.jpeg" />
<meta property="og:url" content="https://forum.mesg.com/t/make-a-websocket-server-to-expose-the-apis/150" />
<meta name="twitter:url" content="https://forum.mesg.com/t/make-a-websocket-server-to-expose-the-apis/150" />
<meta property="og:title" content="Make a websocket server to expose the APIs" />
<meta name="twitter:title" content="Make a websocket server to expose the APIs" />
<meta property="og:description" content="From @Anthony https://github.com/mesg-foundation/core/issues/277  Right now the API is using gRPC with some streams and streams cannot be used in a client side directly. gRPC is planning to support that but in few months only https://github.com/grpc/grpc-web.  The idea is to have a websocket API that acts as a proxy on the gRPC API and that let users to access the gRPC api even from a client side application.  With that we could easily create a website that let you deploy your service, test it, ..." />
<meta name="twitter:description" content="From @Anthony https://github.com/mesg-foundation/core/issues/277  Right now the API is using gRPC with some streams and streams cannot be used in a client side directly. gRPC is planning to support that but in few months only https://github.com/grpc/grpc-web.  The idea is to have a websocket API that acts as a proxy on the gRPC API and that let users to access the gRPC api even from a client side application.  With that we could easily create a website that let you deploy your service, test it, ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 â¤" />
<meta property="article:published_time" content="2018-12-13T11:12:43+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Make a websocket server to expose the APIs","mainEntity":{"@type":"Question","name":"Make a websocket server to expose the APIs","text":"From <a class=\"mention\" href="https://forum.mesg.com/t/make-a-websocket-server-to-expose-the-apis/\&quot;/u/anthony\&quot;">@Anthony<\/a> <a href="https://forum.mesg.com/t/make-a-websocket-server-to-expose-the-apis/\&quot;https://github.com/mesg-foundation/core/issues/277\&quot;">https://github.com/mesg-foundation/core/issues/277<\/a>\n\nRight now the API is using gRPC with some streams and streams cannot be used in a client side directly. gRPC is planning to support that but in few months only <a href="https://forum.mesg.com/t/make-a-websocket-server-to-expose-the-apis/\&quot;https://github.com/grpc/grpc-web\&quot;">https://github.com/grpc/grpc-web<\/a>.\n\nThe idea is to have a websocket API tha&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2018-12-13T11:12:43.504Z","author":{"@type":"Person","name":"Nicolas"}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="150.html">Make a websocket server to expose the APIs</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/engine.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Engine</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">

            <link itemprop="image" href="../../uploads/default/original/1X/325991bd6440c2107d46da006016935a386215d1.jpeg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-12-13T11:12:43Z' class='post-time'>
                December 13, 2018, 11:12am
              </time>
              <meta itemprop='dateModified' content='2018-12-13T11:12:43Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>From <a class="mention" href="../../u/anthony.html">@Anthony</a> <a href="https://github.com/mesg-foundation/core/issues/277">https://github.com/mesg-foundation/core/issues/277</a></p>
<p>Right now the API is using gRPC with some streams and streams cannot be used in a client side directly. gRPC is planning to support that but in few months only <a href="https://github.com/grpc/grpc-web">https://github.com/grpc/grpc-web</a>.</p>
<p>The idea is to have a websocket API that acts as a proxy on the gRPC API and that let users to access the gRPC api even from a client side application.</p>
<p>With that we could easily create a website that let you deploy your service, test it, even create directly apps based on a website only (and the core running in background)</p>
<p>some ideas for implementation</p>
<p><aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="https://github.com/tmc/grpc-websocket-proxy" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../uploads/default/original/1X/325991bd6440c2107d46da006016935a386215d1.jpeg" class="thumbnail" width="" height="">

<h3><a href="https://github.com/tmc/grpc-websocket-proxy" target="_blank">tmc/grpc-websocket-proxy</a></h3>

<p>A proxy to transparently upgrade grpc-gateway streaming endpoints to use websockets - tmc/grpc-websocket-proxy</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="https://github.com/improbable-eng/grpc-web" target="_blank">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="../../uploads/default/original/1X/57289af5f5b1c625eb71e91a2b25bec536ff4efe.png" class="thumbnail" width="" height="">

<h3><a href="https://github.com/improbable-eng/grpc-web" target="_blank">improbable-eng/grpc-web</a></h3>

<p>gRPC Web implementation for Golang and TypeScript. Contribute to improbable-eng/grpc-web development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<hr>
<p>Reply from <a class="mention" href="../../u/ilgooz.html">@ilgooz</a></p>
<p>I watched a video earlier about <a href="https://www.youtube.com/watch?v=RVZX4CwKhGE">Envoy</a>. They call it a special proxy gateway in between gRPC server and <a href="https://github.com/grpc/grpc-web">grpc-web</a>. Video gives a general technical view about Envoy. Gotto check out.</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-12-22T19:52:53Z' class='post-time'>
                December 22, 2018,  7:52pm
              </time>
              <meta itemprop='dateModified' content='2018-12-22T19:52:53Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think, we donâ€™t need to have a built-in proxy in Core. Why not just using Envoy as a proxy like recommended in the gRPC Web docs? That way we donâ€™t need to maintain any kind of websocket proxy inside Core. People who wants to access to Coreâ€™s gRPC APIs could just use Envoy and I think this option supports bidirectional streams as well.</p>
<p>We can also publish a special Dockerfile for envoy that is configured for Core. Also, we can make mesg-js to be compatible with browsers and that way devs can use this pre-generated gRPC client for coreapi.</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-12-26T09:56:43Z' class='post-time'>
                December 26, 2018,  9:56am
              </time>
              <meta itemprop='dateModified' content='2018-12-26T09:56:43Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The best will be to create a system service that contain Envoy <img src="../../images/emoji/twitter/slight_smile.png%3Fv=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-12-26T18:11:50Z' class='post-time'>
                December 26, 2018,  6:11pm
              </time>
              <meta itemprop='dateModified' content='2018-12-26T18:11:50Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <h2>Clarification about Envoy proxy &amp; supporting websocket</h2>
<p>gRPC is originally a TCP based communication protocol. But HTML5 doesnâ€™t give access to creating TCP connections to servers. Because of this limitation, folks at gRPC created an official spec about supporting Web clients trough websocket.</p>
<p>In future, all gRPC servers should both accept TCP and Websocket connections from clients. Itâ€™s also possible to access gRPC server from Web by using proxies like Envoy. Envoy is able to proxy Websocket/HTTP based gRPC requests to a gRPC server that only accepts TCP connections.</p>
<p>So, we have two valid options here. For now, we can just use Envoy to support Web clients and in future we can use a <a href="https://github.com/improbable-eng/grpc-web/blob/master/go/grpcweb/doc.go#L1-L27" rel="nofollow noopener">simple</a> package to support websocket connections next to TCP connections in the Core. This pkg is very simple to use and doesnâ€™t bring any complexity to our code. I havenâ€™t check the code yet but itâ€™s some kind of a wrapper for net connections to upgrade them to a websocket connection or keep them as TCP connections depending on the request style. But anyway, we can do adopt it any time, no need to rush for this.</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-12-26T18:19:30Z'>
              <time itemprop='dateModified' datetime='2018-12-26T18:20:09Z' class='post-time'>
                December 26, 2018,  6:20pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <h2>Difference between grpc/grpc-web &amp; improbable-eng/grpc-web</h2>
<p>They both stands for allowing websocket clients to make gRPC requests to servers/proxies that accepts websocket connections.</p>
<p>They both have the same public APIs but in addition, <em>improbable-eng/grpc-web</em> also supports bidi streams where official one doesnâ€™t. Officials plan to support it in future and their implementation will have the same public APIs with improbable-engâ€™s version.</p>
<p>Also, improbable-eng provides a <a href="https://github.com/improbable-eng/ts-protoc-gen" rel="nofollow noopener">plugin</a> to output TS types as well when generating the client code.</p>
<p>So, itâ€™s totally OK to use <em>improbable-eng/grpc-web</em> in favor of having bidi streams and TS types.</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-12-26T18:46:57Z'>
              <time itemprop='dateModified' datetime='2018-12-26T21:55:33Z' class='post-time'>
                December 26, 2018,  9:55pm
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <h2>Supporting both Server and Browser in mesg-js</h2>
<p>Please read first: <a href="https://github.com/mesg-foundation/mesg-js/issues/35" rel="nofollow noopener">https://github.com/mesg-foundation/mesg-js/issues/35</a><br>
That comment on the issue explains how we can provide our gRPC APIs to consumers to consumers by both supporting Browsers and Nodejs.</p>
<p>This is related with <strong>require(â€˜mesg-jsâ€™).application().api</strong> API. This object exposes the gRPC core APIs. It currently only supports node.js but should also support browsers as well.</p>
<p>We first thought about sperating the packages for browser and server, that way we donâ€™t include extra code that generated for node while mesg-js is being used in a browser environment.</p>
<p>But after a second thought, I think seperating them wouldnâ€™t be good because that way itâ€™s not possible to support universal SPAs natively. And if we seperate them, consumers have to do some magic in their webpack confings to switch between the browser and nodejs version of mesg-js. This is not needed. Itâ€™s always nice to be able to provide a simple <em>mesg.js</em> that can run in browsers and nodejs without any effort. It should support UMD and that way it can be used with scripts tags in browsers or by getting imported as a package both in browser and node environments easily.</p>
<p>In future we can think of some kind of optimizations for removing node related code when mesg-js is running on browser but itâ€™s too much for now to think about that. And the extra code is just a few 100s of lines. So itâ€™s OK to have them.</p>
<p><em>We can make the extra code can be removed when webpack target is web or detecting browsers via ENV vars by checking for <em>procces.env.NODE_ENV</em>. This way we can give an option to our consumers to reduce their mesg.js file size when on browser.</em><br>
<em>Or we can make it possible to node related code to be removed with some webpack plugins and put this info into the docs.</em> Also <a href="https://github.com/defunctzombie/package-browser-field-spec" rel="nofollow noopener">see</a>.<br>
<em>Or we can provide separate builds, one (mesg-js) can support both client and server and other (mesg-js-web.js) can only support only web etcâ€¦</em></p>
<p>I propose to make <strong>require(â€˜mesg-jsâ€™).application().api</strong> to support both browsers and node.js for now without thinking any optimizations in mind. And letâ€™s not touch to <strong>require(â€˜mesg-jsâ€™).service().api</strong> because service api is only planned to be run in a server env for now, not browsers. But we can change this in future.<br>
Note that, his is a breaking change because weâ€™re also going to use plugins to generate clients and types. Which introduces setters/getters for <em>XRequest</em>, <em>XReply</em> types. We used to directly set the values to mutable fields but this is no longer an option.</p>
<div class="poll" data-poll-status="open" data-poll-public="true" data-poll-results="always" data-poll-type="regular" data-poll-name="poll">
<div>
<div class="poll-container">
<ul>
<li data-poll-option-id="36c5535c97c7c40873fb19268f3b223c">Update current APIs to support both browsers and node.js without thinking any file size optimizations and generate client code automatically.</li>
<li data-poll-option-id="c88ac703ff23bf082840145aa79e9d1a">Think about file size optimizations, avoid any breaking change that setter/getters will introduce and manually create client code(only types).</li>
</ul>
</div>
<div class="poll-info">
<p>
<span class="info-number">0</span>
<span class="info-label">voters</span>
</p>
</div>
</div>
</div>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-12-27T04:21:44Z'>
              <time itemprop='dateModified' datetime='2018-12-27T04:24:24Z' class='post-time'>
                December 27, 2018,  4:24am
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great research <a class="mention" href="../../u/ilgooz.html">@ilgooz</a>!</p>
<p>I really like the concept to have a universal lib that work in both browser and node with the same API.</p>
<p>We can do breaking change because we are already removing the when/then logic of the application lib.</p>
<hr>
<p>Even if I really like the universal lib, I would like to do it step by step.</p>
<ul>
<li>Firstly, we focus only on the node.js version with the generated TS file (so the new API). Once done, we release it as a new major version on NPM. I would like to release this new version and update the doc maximum <strong>Friday 4th January</strong>.</li>
<li>Secondly, then we have time to make the core compatible with gRPC-web and upgrade the lib to make it compatible with browser as an universal lib. Having more time will also us to do a better universal lib and also release the feature with new docs, medium articles and make a big public announcement!</li>
</ul>
<p>What do you think guys?</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="150.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-12-27T07:33:00Z' class='post-time'>
                December 27, 2018,  7:33am
              </time>
              <meta itemprop='dateModified' content='2018-12-27T07:33:00Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yeah, I agree! Letâ€™s go step by step.</p>
        </div>

        <meta itemprop='headline' content='Make a websocket server to expose the APIs'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
