<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Reusable Workflows &amp; Workflow Marketplace - Development - MESG Community</title>
    <meta name="description" content="Application = Workflow 
Problem
Let’s say that we have a sendgrid service in the service marketplace to send emails. 
And let’s say that a part of our workflow needs to send a specific type of emails to send verification&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="207.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Reusable Workflows &amp; Workflow Marketplace&#39;" href="207.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/reusable-workflows-workflow-marketplace/207" />
<meta name="twitter:url" content="https://forum.mesg.com/t/reusable-workflows-workflow-marketplace/207" />
<meta property="og:title" content="Reusable Workflows &amp; Workflow Marketplace" />
<meta name="twitter:title" content="Reusable Workflows &amp; Workflow Marketplace" />
<meta property="og:description" content="Application = Workflow  Problem Let’s say that we have a sendgrid service in the service marketplace to send emails.  And let’s say that a part of our workflow needs to send a specific type of emails to send verification codes to users to make it possible for them to verify their accounts, and let them to reset their passwords and so on.  Knowing that, think about a scenario that a user wants to reset its password. To do that we need to send a verification code to its email. After user receiving..." />
<meta name="twitter:description" content="Application = Workflow  Problem Let’s say that we have a sendgrid service in the service marketplace to send emails.  And let’s say that a part of our workflow needs to send a specific type of emails to send verification codes to users to make it possible for them to verify their accounts, and let them to reset their passwords and so on.  Knowing that, think about a scenario that a user wants to reset its password. To do that we need to send a verification code to its email. After user receiving..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />
<meta property="article:published_time" content="2019-01-20T15:37:20+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Reusable Workflows & Workflow Marketplace","mainEntity":{"@type":"Question","name":"Reusable Workflows & Workflow Marketplace","text":"Application = Workflow\n\nProblem\n\nLet’s say that we have a <a href="https://forum.mesg.com/t/reusable-workflows-workflow-marketplace/\&quot;https://github.com/mesg-foundation/service-email-sendgrid\&quot;" rel=\"nofollow noopener\">sendgrid<\/a> service in the service marketplace to send emails.\n\nAnd let’s say that a part of our workflow needs to send a specific type of emails to send verification codes to users to make it possible for them to verify their accounts, and let t&hellip;","upvoteCount":2,"answerCount":0,"dateCreated":"2019-01-20T15:37:20.024Z","author":{"@type":"Person","name":"İlker"}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="207.html">Reusable Workflows &amp; Workflow Marketplace</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="207.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-01-20T15:37:20Z'>
              <time itemprop='dateModified' datetime='2019-01-21T08:37:10Z' class='post-time'>
                January 21, 2019,  8:37am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>Application = Workflow</strong></p>
<h2>Problem</h2>
<p>Let’s say that we have a <a href="https://github.com/mesg-foundation/service-email-sendgrid" rel="nofollow noopener">sendgrid</a> service in the service marketplace to send emails.</p>
<p>And let’s say that a part of our workflow needs to send a specific type of emails to send verification codes to users to make it possible for them to verify their accounts, and let them to reset their passwords and so on.</p>
<p>Knowing that, think about a scenario that a user wants to reset its password. To do that we need to send a verification code to its email. After user receiving this email that contains the code, it should enter it in a mobile app or website and be able to set a new password for its account if the verification code is correct.</p>
<p>To make this possible, devs need to generate a verification code in their workflows maybe with a help of another service, keep this code in a database by using a database service and send the code to user with an email by using the sendgrid service. And check the code entered by the user while password is being changed.</p>
<p>As we see, to implement this feature we need these two sendgrind and mongodb services and introduce some business logic directly into the workflow.</p>
<h2>Proposal In Short</h2>
<ul>
<li>Allow <a href="../introducing-workflow-files.html">workflows</a> to be reusable.</li>
<li>Create a marketplace for reusable workflows.</li>
</ul>
<h2>Proposal In Long</h2>
<p>My proposal here is to allow devs to <strong>create reusable workflows</strong> so they’ll not be required to duplicate same logic in their different workflows(projects).</p>
<p>With this reusable workflows, we can simplify the code verification feature we talked about in the <strong>Problem</strong> section by creating a reusable workflow like below:</p>
<p><strong>workflow id(wid)</strong>: email-code-verification<br>
<strong>workflow services (the services that workflow uses)</strong>: sendgrid, mongodb<br>
<strong>workflow tasks</strong>:</p>
<ul>
<li>sendVerification ([ <em>inputs&gt;</em> <code>email string</code>, <code>timeoutDuration string</code> ])</li>
<li>verifyCode ([ <em>inputs&gt;</em> <code>code string</code> ]) ([ <em>outputs&gt;</em> <code>email string</code> ]) // returns email if code is exists and not expired</li>
</ul>
<p>Reusable workflows are just like reusable services. They have tasks, task results and events. They can be used by other workflows like how services are used inside workflows. They can also have deployment time configurations. They’re easy to create with a GUI and can be deployed to workflow marketplace.</p>
<p>This reusable workflows idea is very similar to <a href="../service-composition/22.html">service composition</a> but there are some major differences:</p>
<ul>
<li>It is possible to use multiple services in a reusable workflow and not just only one(this is the case in service compositions).</li>
<li>It’s easier to create workflows rather than services. Because a GUI will be available to create workflows for non-programmers.</li>
<li>We’ll have a service &amp; a workflow marketplace growing naturally and separately. Services will stay more generic because we’ll have this strong separation between the services and workflows. On the other hand, service composition will result services to be <strong>less generic(opinionated)</strong> which is a very bad adoption and will create a noise in the service marketplace.</li>
</ul>
<p>We can also make this reusable workflows to be compatible with the current <code>service(listenTask, submitResult)</code> &amp; <code>core(listenResult, listenEvent, executeTask)</code> APIs so we don’t need to create more gRPC APIs or logic in the Core.</p>
<h2>Details About Reusable Workflows</h2>
<ul>
<li>Reusable workflows can be created over a GUI.</li>
<li>Reusable workflows can use other reusable workflows or services and listen for their results or events and execute their tasks.</li>
<li>Reusable workflows can be used by regular workflows just like how regular workflows uses services.</li>
<li>Reusable workflows can receive configurations in the deploy time.</li>
<li>Reusable workflows acts like services so they’ll share the same <code>service(listenTask, submitResult)</code> &amp; <code>core(listenResult, listenEvent, executeTask)</code> APIs with services.</li>
<li>There is no much difference between regular workflows and reusable ones. They are deployed/started/stopped/deleted in the same way. The difference is, workflow syntax will let devs to  define some tasks and emit some results or events from a workflow. This way, they can be used just like services. Reusable workflows gives the possibility to combine multiple services together and create an opinionated one.</li>
</ul>
        </div>

        <meta itemprop='headline' content='Reusable Workflows &amp; Workflow Marketplace'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../introducing-workflow-files/95/16.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/introducing-workflow-files/95/16'>
                      <meta itemprop='position' content='4'>
                      <span itemprop='name'>Introducing Workflow Files</span>
                    </a>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../integration-of-workflows-in-services-solves-service-composition/283.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/integration-of-workflows-in-services-solves-service-composition/283'>
                      <meta itemprop='position' content='5'>
                      <span itemprop='name'>Integration of workflows in services (solves service composition)</span>
                    </a>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="207.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-01-21T08:37:46Z' class='post-time'>
                January 21, 2019,  8:37am
              </time>
              <meta itemprop='dateModified' content='2019-01-21T08:37:46Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great proposal! We wanted to implement a similar system once workflow and the marketplace are release.<br>
Good that you came up with a similar idea <img src="../../images/emoji/twitter/wink.png%3Fv=6" title=":wink:" class="emoji" alt=":wink:"></p>
        </div>

        <meta itemprop='headline' content='Reusable Workflows &amp; Workflow Marketplace'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="207.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-03-05T09:28:09Z'>
              <time itemprop='dateModified' datetime='2019-03-05T10:03:25Z' class='post-time'>
                March 5, 2019, 10:03am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here is a real world example of reusable applications, please check the <a href="https://github.com/ilgooz/service-graphql" rel="nofollow noopener">graphql</a> service.</p>
<p>Note that, since we don’t officially support reusable workflows/service compositions yet, this is just an experimentation with what we have.</p>
<p>Normally, a service only connects to <em>service</em> gRPC API but this service also connect to <em>core</em> gRPC API. In another means, this service can react to events, results and execute tasks from other services likewise an application.</p>
<p>The service’s purpose is to run as a GraphQL server. To do that it depends on <a href="https://github.com/ilgooz/service-http-server" rel="nofollow noopener">http-server</a> to react GraphQL queries sent over http requests. When there is a new request on <em>http-server</em>, it receives the <em>request</em> event and checks the <em>path</em> and <em>method</em> of the http request to determine if it’s a GraphQL request.</p>
<p>If so, it emits a <em>query</em> event that contains information about the corresponding GraphQL request. Applications should listen for this event and prepare the data for it and then execute <em>completeQuery</em> on the service to send back a response.</p>
<p>After response received by the graphql service it forwards it to the <em>http-server</em> service by calling its <em>completeSession</em> task and then user gets its GraphQL query results.</p>
<p>In addition to this, graphql service also depends on <a href="https://github.com/ilgooz/service-graphql-introspection" rel="nofollow noopener">graphql-introspection</a> service to automatically send responses to GraphQL’s Introspection queries by using the <em>SCHEMA</em> which is set as an environment variable to the graphql service.</p>
<p>To check graphql service in action please check <a href="https://github.com/mesg-foundation/application-marketplace/pull/1/files" rel="nofollow noopener">this PR</a> on marketplace application.</p>
        </div>

        <meta itemprop='headline' content='Reusable Workflows &amp; Workflow Marketplace'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="207.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-06T02:47:53Z' class='post-time'>
                March 6, 2019,  2:47am
              </time>
              <meta itemprop='dateModified' content='2019-03-06T02:47:53Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That’s a good way to do service composition with the current version of Core <img src="../../images/emoji/twitter/slight_smile.png%3Fv=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>The first problem I see here is currently there is no way to set the dependency between the composed service in the service definition. We could add a new field in the service dependency to specify the composed service and deploy / start them automatically.</p>
<p>The second problem here is that the service is using the core api. That’s something we would like to remove in the future. This can be solved if the service could also have workflows that will connect the composed service to the main one. But in this case, the workflow will be executed by the Core itself. This will be much cleaner.</p>
        </div>

        <meta itemprop='headline' content='Reusable Workflows &amp; Workflow Marketplace'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
