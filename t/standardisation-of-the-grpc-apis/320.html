<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Standardisation of the gRPC apis - Engine - MESG Community</title>
    <meta name="description" content="Hey guys, I would like to propose a standardisation of the definition of the gRPC apis. 
Get
The request should contain the hash of the resource to get. 
The response should be directly the resource definition. 
rpc Get(&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="320.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Standardisation of the gRPC apis&#39;" href="320.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/standardisation-of-the-grpc-apis/320" />
<meta name="twitter:url" content="https://forum.mesg.com/t/standardisation-of-the-grpc-apis/320" />
<meta property="og:title" content="Standardisation of the gRPC apis" />
<meta name="twitter:title" content="Standardisation of the gRPC apis" />
<meta property="og:description" content="Hey guys, I would like to propose a standardisation of the definition of the gRPC apis.  Get The request should contain the hash of the resource to get.  The response should be directly the resource definition.  rpc Get(GetResourceRequest) returns (definition.Resource) {}  message GetResourceRequest {   string hash = 1; }  Here is my pro and con to directly return the resource definition instead of a response message that contains it:  Pro  Less proto definition. No need to create a other proto ..." />
<meta name="twitter:description" content="Hey guys, I would like to propose a standardisation of the definition of the gRPC apis.  Get The request should contain the hash of the resource to get.  The response should be directly the resource definition.  rpc Get(GetResourceRequest) returns (definition.Resource) {}  message GetResourceRequest {   string hash = 1; }  Here is my pro and con to directly return the resource definition instead of a response message that contains it:  Pro  Less proto definition. No need to create a other proto ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2019-06-20T09:36:49+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Standardisation of the gRPC apis","mainEntity":{"@type":"Question","name":"Standardisation of the gRPC apis","text":"Hey guys, I would like to propose a standardisation of the definition of the gRPC apis.\n\nGet\n\nThe request should contain the hash of the resource to get.\n\nThe response should be directly the resource definition.\n\nrpc Get(GetResourceRequest) returns (definition.Resource) {}\n\nmessage GetResourceRequest&hellip;","upvoteCount":0,"answerCount":1,"dateCreated":"2019-06-20T09:36:49.117Z","author":{"@type":"Person","name":"Nicolas"},"acceptedAnswer":{"@type":"Answer","text":"This will be released in Engine v0.11","upvoteCount":0,"dateCreated":"2019-07-04T04:58:29.185Z","url":"https://forum.mesg.com/t/standardisation-of-the-grpc-apis/320/5","author":{"@type":"Person","name":"Nicolas"}}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="320.html">Standardisation of the gRPC apis</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/engine.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Engine</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="320.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-06-20T09:36:49Z'>
              <time itemprop='dateModified' datetime='2019-06-20T10:04:39Z' class='post-time'>
                June 20, 2019, 10:04am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hey guys, I would like to propose a standardisation of the definition of the gRPC apis.</p>
<h1>Get</h1>
<p>The request should contain the <code>hash</code> of the resource to get.<br>
The response should be directly the resource definition.</p>
<pre><code class="lang-auto">rpc Get(GetResourceRequest) returns (definition.Resource) {}

message GetResourceRequest {
  string hash = 1;
}
</code></pre>
<p>Here is my pro and con to directly return the resource definition instead of a response message that contains it:</p>
<h3>Pro</h3>
<ol>
<li>Less proto definition. No need to create a other proto message</li>
<li>Force to only returns the resource without any other data. If any data needs to be returned it’s either because the api is not well designed or a new type of api and resource need to be created.</li>
<li>Reusability. Having to create the resource definition in the package <code>protobuf/definition</code> push to reuse the same definition for many APIs.</li>
</ol>
<h3>Con</h3>
<ol>
<li>Less flexibility. Cannot add metadata on the returned ressource. But as said in point pro.2, it’s actually mean the api is poorly designed.</li>
</ol>
<h1>List</h1>
<p>The request message should contained the possible and optional filter to apply. The request can be empty if no filter is implemented.<br>
The response message should contain the resources as an array.</p>
<pre><code class="lang-auto">rpc List (ListResourcesRequest) returns (ListResourcesResponse) {}

message ListResourcesRequest {
  string possibleAndOptionalFilter = 1;
}

 message ListResourcesResponse {
  repeated definition.Resource resources = 1;
}
</code></pre>
<h1>Create</h1>
<p>The request should contain the necessary data to create the resource.<br>
The response should only contain the calculated hash corresponding to the added resource.</p>
<p>EDIT <span class="hashtag">#1:</span></p>
<pre><code class="lang-auto">rpc Create (CreateResourceRequest) returns (CreateResourceResponse) {}

message CreateResourceRequest {
  string allNecessaryDataToCreateTheResource = 1;
}

message CreateResourceResponse {
  string hash = 1;
}
</code></pre>
<h1>Delete</h1>
<p>I suggest that the delete API should be “send and forget”.<br>
The request contains everything necessary but the response is empty.<br>
Only the <code>hash</code> should be send in request.</p>
<pre><code class="lang-auto">rpc Delete (DeleteResourceRequest) returns (DeleteResourceResponse) {}

message DeleteResourceRequest {
  string hash = 1;
}

message DeleteResourceResponse {}
</code></pre>
<h1>Update</h1>
<p>I suggest that the update API should be “send and forget”.<br>
The request contains everything necessary but the response is empty.<br>
The <code>hash</code> and the data to update should be send in request.</p>
<pre><code class="lang-auto">rpc Update (UpdateResourceRequest) returns (UpdateResourceResponse) {}

message UpdateResourceRequest {
  string hash = 1;
  string dataToUpdate = 2;
}

message UpdateResourceResponse {}
</code></pre>
<h1>Merge identical message</h1>
<p>As you see, there is a few identical messages that only contain the resource’s hash:</p>
<ul>
<li><code>GetResourceRequest</code></li>
<li><code>CreateResourceResponse</code></li>
<li>
<code>DeleteResourceRequest</code>.</li>
</ul>
<p>We could merge those message into one:</p>
<pre><code class="lang-auto">message ResourceIdentifier {
  string hash = 1;
}
</code></pre>
<p>I’m not sure it’s really necessary and actually useful. It will remove flexibility to add “flags” to the request (but do we actually want those?).</p>
<hr>
<p><a class="mention-group" href="../../groups/core.html">@core</a> what do you think guys?</p>
        </div>

        <meta itemprop='headline' content='Standardisation of the gRPC apis'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="320.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-06-20T10:01:57Z'>
              <time itemprop='dateModified' datetime='2019-06-20T10:02:06Z' class='post-time'>
                June 20, 2019, 10:02am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>EDIT <span class="hashtag">#1</span></p>
<p>Replaced:</p>
<pre><code class="lang-auto">rpc Create (definition.Resource) returns (CreateResourceResponse) {}

message CreateResourceResponse {
  string hash = 1;
}
</code></pre>
<p>By:</p>
<pre><code class="lang-auto">rpc Create (CreateResourceRequest) returns (CreateResourceResponse) {}

message CreateResourceRequest {
  string allNecessaryDataToCreateTheResource = 1;
}

message CreateResourceResponse {
  string hash = 1;
}
</code></pre>
        </div>

        <meta itemprop='headline' content='Standardisation of the gRPC apis'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="320.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-06-20T10:08:41Z'>
              <time itemprop='dateModified' datetime='2019-06-20T10:09:34Z' class='post-time'>
                June 20, 2019, 10:09am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I prefer explicit XRequest &amp; XResponse, otherwise it’s not possible to have the repeated types or metadata. this is not a bad api at all.  same applied in the resfull api world</p>
<p>I like the idea of responses to return deleted resource, that way cli can use it to inform user after deletion, and it’s more functional. but not mandatory.</p>
<p>Updates must return the updated resource, always a good pattern, same applied in the resfull api world.</p>
        </div>

        <meta itemprop='headline' content='Standardisation of the gRPC apis'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/krhubert.html'><span itemprop='name'>krhubert</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="320.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-06-21T08:33:53Z' class='post-time'>
                June 21, 2019,  8:33am
              </time>
              <meta itemprop='dateModified' content='2019-06-21T08:33:53Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As for me:</p>
<p><code>+</code> return resources for get</p>
<ul>
<li>Merge identical messages - that might introduce some pbms in the future and I think it’s safer to split them.</li>
<li>List should return resources stream instead of one big object as caller might have ask about lots of objects.</li>
</ul>
<p>But let’s not forget that api should be designed for functionalities and not strictly for following the rules.</p>
        </div>

        <meta itemprop='headline' content='Standardisation of the gRPC apis'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="320.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-07-04T04:58:29Z'>
              <time itemprop='dateModified' datetime='2019-07-04T04:58:30Z' class='post-time'>
                July 4, 2019,  4:58am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This will be released in Engine v0.11</p>
        </div>

        <meta itemprop='headline' content='Standardisation of the gRPC apis'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
