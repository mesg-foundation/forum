<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Fixed Service ID/Name &amp; Service Update, Create Feature - Development - MESG Community</title>
    <meta name="description" content="Related with #275, #558. 
Currently, there is no way of updating existent services with a command like: 
mesg-core update --source SERVICE_PATH SERVICE_ID 
Because of this limitation, when there is a new version of a ser&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="110.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Fixed Service ID/Name &amp; Service Update, Create Feature&#39;" href="110.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/fixed-service-id-name-service-update-create-feature/110" />
<meta name="twitter:url" content="https://forum.mesg.com/t/fixed-service-id-name-service-update-create-feature/110" />
<meta property="og:title" content="Fixed Service ID/Name &amp; Service Update, Create Feature" />
<meta name="twitter:title" content="Fixed Service ID/Name &amp; Service Update, Create Feature" />
<meta property="og:description" content="Related with #275, #558.  Currently, there is no way of updating existent services with a command like:  mesg-core update --source SERVICE_PATH SERVICE_ID  Because of this limitation, when there is a new version of a service, we required to re-deploy it and get a new service id to use. If this service has some data volumes attached to it, that volumes will also be freshly created and there will be no access to previous data. This is a totally expected behavior because service id is new so its da..." />
<meta name="twitter:description" content="Related with #275, #558.  Currently, there is no way of updating existent services with a command like:  mesg-core update --source SERVICE_PATH SERVICE_ID  Because of this limitation, when there is a new version of a service, we required to re-deploy it and get a new service id to use. If this service has some data volumes attached to it, that volumes will also be freshly created and there will be no access to previous data. This is a totally expected behavior because service id is new so its da..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2018-10-30T20:12:42+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Fixed Service ID/Name & Service Update, Create Feature","mainEntity":{"@type":"Question","name":"Fixed Service ID/Name & Service Update, Create Feature","text":"Related with <a href="https://forum.mesg.com/t/fixed-service-id-name-service-update-create-feature/\&quot;https://github.com/mesg-foundation/core/issues/275\&quot;">#275<\/a>, <a href="https://forum.mesg.com/t/fixed-service-id-name-service-update-create-feature/\&quot;https://github.com/mesg-foundation/core/issues/558\&quot;">#558<\/a>.\n\nCurrently, there is no way of updating existent services with a command like:\n\nmesg-core update --source SERVICE_PATH SERVICE_ID\n\nBecause of this limitation, when there is a new version of a service, we required to re-deploy it and get a new service id to use. If this servi&hellip;","upvoteCount":0,"answerCount":1,"dateCreated":"2018-10-30T20:12:41.903Z","author":{"@type":"Person","name":"İlker"},"acceptedAnswer":{"@type":"Answer","text":"This proposal has been released in v0.5.","upvoteCount":0,"dateCreated":"2018-12-11T08:14:41.474Z","url":"https://forum.mesg.com/t/fixed-service-id-name-service-update-create-feature/110/5","author":{"@type":"Person","name":"Nicolas"}}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="110.html">Fixed Service ID/Name &amp; Service Update, Create Feature</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/proposal.html' class='discourse-tag' rel="tag">proposal</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-10-30T20:12:42Z'>
              <time itemprop='dateModified' datetime='2018-10-30T21:04:03Z' class='post-time'>
                October 30, 2018,  9:04pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Related with <a href="https://github.com/mesg-foundation/core/issues/275">#275</a>, <a href="https://github.com/mesg-foundation/core/issues/558">#558</a>.</p>
<p>Currently, there is no way of updating existent services with a command like:<br>
<code>mesg-core update --source SERVICE_PATH SERVICE_ID</code></p>
<p>Because of this limitation, when there is a new version of a service, we required to re-deploy it and get a new service id to use. If this service has some data volumes attached to it, that volumes will also be freshly created and there will be no access to previous data. This is a totally expected behavior because service id is new so its data volumes are also should be newly created.</p>
<p>My suggestion is to have this new <code>update</code> feature to update a service’s source <strong>only</strong> and have the same service id for it. This way, other props of service will stay the same like its data volumes. This is an expected behaviour when <code>update</code> command is used.<br>
Also, we may have other service props other than data volumes that we may want to keep as the same even if the source code is changed and be able to update them by using different flags with <code>update</code> command.</p>
<p>Note that, to make <code>update</code> work, we need to have static unique ids for services like <a class="mention" href="../../u/anthony.html">@Anthony</a> pointed. This means, deploying services with the same source code will result with different uuids.</p>
<p>Maybe we should also combine <code>deploy</code> &amp; <code>start</code> as <code>create</code>. Or we can keep the <code>deploy</code> and use it optionally for creating a service directly from an image next to deploying from source:</p>
<pre><code class="lang-auto">// both are the same

$ mesg-core service create SERVICE_HASH
// response: 13010331-50ce-4d29-bd2b-917379a5662a

$ mesg-core service create SERVICE_SOURCE_PATH
// response: 13010331-50ce-4d29-bd2b-917379a5662a
</code></pre>
<p><code>create</code> can also have an optional unique name to be used as alias to service uuid:</p>
<pre><code class="lang-auto">$ mesg-core service create --name hello-world SERVICE_HASH
// response: 13010331-50ce-4d29-bd2b-917379a5662a
</code></pre>
<p>use optionally set unique names with <code>dev</code> command under the hood. needed for solving issue <span class="hashtag">#275:</span></p>
<pre><code class="lang-auto">// hello-world and randomly created 13010331-50ce-4d29-bd2b-917379a5662a can be
// used to access to services from mesg applications.

$ mesg-core service create --name hello-world SERVICE_HASH
// response: 13010331-50ce-4d29-bd2b-917379a5662a

$ mesg-core service dev --name hello-world SERVICE_SOURCE_PATH
// active logs...
// .....
</code></pre>
<p>–<br>
<a class="mention" href="../../u/anthony.html">@Anthony</a> could you please give details about the <code>bind</code> method of yours that you mentioned in the issue <span class="hashtag">#558</span> for solving the nonpermanent data volumes problem?</p>
        </div>

        <meta itemprop='headline' content='Fixed Service ID/Name &amp; Service Update, Create Feature'>
          <meta itemprop='keywords' content='proposal'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../support-named-services-for-communication-of-services-in-the-shared-network/113/2.html" itemprop='item'>
                      <meta itemprop='url' content='https://forum.mesg.com/t/support-named-services-for-communication-of-services-in-the-shared-network/113/2'>
                      <meta itemprop='position' content='3'>
                      <span itemprop='name'>Support Named Services for Communication of Services in the Shared Network</span>
                    </a>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-31T21:14:14Z' class='post-time'>
                October 31, 2018,  9:14pm
              </time>
              <meta itemprop='dateModified' content='2018-10-31T21:14:14Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think this is just a subset of the problem. We could also talk about the fact that every time we are using the command <code>dev</code> (with some updates on the service) we have a different ID so we need to update the ID in the application or any commands that we are using and this is really error prone.</p>
<p>For the <code>update</code> command I think it’s not really good I really want to have something without any update, just append only.</p>
<p>The way I see it is the following:</p>
<ul>
<li>Each service has it’s own unique ID (defined in the mesg.yml and why not created with a <code>service create</code> command) eg: (ethereum-mainnet-3148feqheq or even just an UUID or similar)</li>
<li>This Id will always be the same</li>
<li>This alias will have multiple versions</li>
<li>Each version is a deployed version of what we have right now (so the different updates for the service)</li>
</ul>
<p>We will have something like:<br>
Alias: ethereum-mainnet-3148feqheq<br>
versions:</p>
<ul>
<li>31urbib31rib31u4113434</li>
<li>13ouh431uo4h13uh4314</li>
<li>314j31bk4hbj34jhv42tjhv</li>
</ul>
<p>This way we can access to any deployed versions of the service but we can also access to the service ID/alias that will be the latest deployed version and we can base any naming on this ID/alias (this would solve the problem with volumes, the name of the volume will be constant over time).</p>
<p>To summarize, this ID/alias system is a name service on top of the services and we can resolve either the alias or the version based on the hash.</p>
<p>This way we don’t have any update but instead only append (and delete).</p>
<p>For the bind option it’s an option from the container (<a href="https://github.com/mesg-foundation/core/blob/f099449d73c96435d323cba5178c91b98e12760b/container/service_options.go#L38-L41">https://github.com/mesg-foundation/core/blob/f099449d73c96435d323cba5178c91b98e12760b/container/service_options.go#L38-L41</a>) that use either the path on the host (if the bind option is true) or a name for the volume (based on the ID) so if we can bind these volumes we just need to store them but the we will not have any name based on the ID for the docker volume and so solve this problem of volumes deleted for every modification (because the volume is binded to the host)</p>
        </div>

        <meta itemprop='headline' content='Fixed Service ID/Name &amp; Service Update, Create Feature'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-11-08T11:32:46Z' class='post-time'>
                November 8, 2018, 11:32am
              </time>
              <meta itemprop='dateModified' content='2018-11-08T11:32:46Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I totally agree with Anthony on Alias.</p>
<p>I suggest that <strong>alias</strong> should not be generated but set manually by service developer in <code>mesg.yml</code> files.<br>
If <strong>alias</strong> is missing, an error should be throw. This is not a retro compatible feature.</p>
<p>That way, we could have nice alias like <code>ethereum-erc20</code>.</p>
<p>I really like to set an <strong>alias</strong> in the <code>mesg.yml</code> file that app developer can use without having to update the service id all the time <img src="../../images/emoji/twitter/+1.png%3Fv=6" title=":+1:" class="emoji" alt=":+1:"></p>
<hr>
<p>About the docker’s volume topic:<br>
I suggest that we bind all volumes to the host (like before) using the <code>.mesg</code> folder with combinaison of the alias.</p>
        </div>

        <meta itemprop='headline' content='Fixed Service ID/Name &amp; Service Update, Create Feature'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-11-26T14:48:22Z' class='post-time'>
                November 26, 2018,  2:48pm
              </time>
              <meta itemprop='dateModified' content='2018-11-26T14:48:22Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This start to be implemented in the PR <a href="https://github.com/mesg-foundation/core/pull/583">https://github.com/mesg-foundation/core/pull/583</a></p>
        </div>

        <meta itemprop='headline' content='Fixed Service ID/Name &amp; Service Update, Create Feature'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-12-11T08:14:41Z'>
              <time itemprop='dateModified' datetime='2018-12-11T08:37:26Z' class='post-time'>
                December 11, 2018,  8:37am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This proposal has been released in v0.5.</p>
        </div>

        <meta itemprop='headline' content='Fixed Service ID/Name &amp; Service Update, Create Feature'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
