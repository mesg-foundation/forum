<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>File organization - Development - MESG Community</title>
    <meta name="description" content="Here is the proposed file organisation: (package is the name of the package): 
package/
  package.go       // contains interface
  package_test.go  // contains anything needed for test
  errors.go        // contains stru&amp;hellip;">
    <meta name="generator" content="Discourse 2.5.0.beta5 - https://github.com/discourse/discourse version 00aab498297cba8f977c1e0eb17b7d38ff06cc68">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/9f11b6ddfa02bffdbec79487592a0573a0236cb5_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/53630361a40ad76e1733dd0b0f486e9ae2f4f4d6_2_180x180.png">
<meta name="theme-color" content="#491e8c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="73.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.mesg.com","potentialAction":{"@type":"SearchAction","target":"https://forum.mesg.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="MESG Community Search">

      <link href="../../stylesheets/desktop_3_52e3411e87658e862890db7bd06899cf49ad5f59.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="7"/>
      <link href="../../stylesheets/desktop_theme_7_bf4f2d3d8a71e6ee907065be9a79df3d849bd29c.css%3F__ws=forum.mesg.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-117583862-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

<link rel="preload" href="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js" as="script">
<script src="../../assets/google-universal-analytics-00f5cdf7dfd45cba1ae2d258c3366c371c5671023250abbd964a1f16fc2c11a7.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;File organization&#39;" href="73.rss" />
    <meta property="og:site_name" content="MESG Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:image" content="https://forum.mesg.com/uploads/default/original/1X/55dc05831fcfbf2dd0677c9ae39099094e85cc07.png" />
<meta property="og:url" content="https://forum.mesg.com/t/file-organization/73" />
<meta name="twitter:url" content="https://forum.mesg.com/t/file-organization/73" />
<meta property="og:title" content="File organization" />
<meta name="twitter:title" content="File organization" />
<meta property="og:description" content="Here is the proposed file organisation: (package is the name of the package):  package/   package.go       // contains interface   package_test.go  // contains anything needed for test   errors.go        // contains struct of errors needed for the interface of the package   types.go         // contains struct of types needed for the interface of the package   featureA_test.go   featureB_test.go   ...   features/        // contains feature files (BDD)     featureA.feature     featureB.feature    ..." />
<meta name="twitter:description" content="Here is the proposed file organisation: (package is the name of the package):  package/   package.go       // contains interface   package_test.go  // contains anything needed for test   errors.go        // contains struct of errors needed for the interface of the package   types.go         // contains struct of types needed for the interface of the package   featureA_test.go   featureB_test.go   ...   features/        // contains feature files (BDD)     featureA.feature     featureB.feature    ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2018-10-03T05:16:22+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"File organization","mainEntity":{"@type":"Question","name":"File organization","text":"Here is the proposed file organisation: (package is the name of the package):\n\npackage/\n\npackage.go       // contains interface\n\npackage_test.go  // contains anything needed for test\n\nerrors.go        // contains struct of errors needed for the interface of the package\n\ntypes.go         // conta&hellip;","upvoteCount":1,"answerCount":0,"dateCreated":"2018-10-03T05:16:22.275Z","author":{"@type":"Person","name":"Nicolas"}}}</script>
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png" alt="MESG Community" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="73.html">File organization</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="73.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-03T05:16:22Z' class='post-time'>
                October 3, 2018,  5:16am
              </time>
              <meta itemprop='dateModified' content='2018-10-03T05:16:22Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here is the proposed file organisation: (package is the name of the package):</p>
<pre><code class="lang-auto">package/
  package.go       // contains interface
  package_test.go  // contains anything needed for test
  errors.go        // contains struct of errors needed for the interface of the package
  types.go         // contains struct of types needed for the interface of the package
  featureA_test.go
  featureB_test.go
  ...
  features/        // contains feature files (BDD)
    featureA.feature
    featureB.feature
    ...
  mocks/
    package.go         // contains mock implementation
  implementationA/
    implementationA.go // contains one implementation
    featureA.go
    featureB.go
    ...
  implementationB/     // possible other implementation
</code></pre>
        </div>

        <meta itemprop='headline' content='File organization'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/krhubert.html'><span itemprop='name'>krhubert</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="73.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-04T06:54:35Z' class='post-time'>
                October 4, 2018,  6:54am
              </time>
              <meta itemprop='dateModified' content='2018-10-04T06:54:35Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><img src="../../images/emoji/twitter/-1.png%3Fv=6" title=":-1:" class="emoji" alt=":-1:"></p>
<p>File organization should be smart and readable in the first place (like classes/function/methods/variables in lang itself).</p>
<p>Also, there are a variety of packages and only one file struct won’t cover it all. In fact, it will force us to stick to this layout which causes more chaos in my opinion.</p>
<p>The last thing is lost of flexibility, which is great.</p>
<p>So there are already some good resources for packages naming and layout like <a href="https://blog.golang.org/package-names">https://blog.golang.org/package-names</a>, but going further with such strictness causes more harm than good.</p>
        </div>

        <meta itemprop='headline' content='File organization'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/ilgooz.html'><span itemprop='name'>ilgooz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="73.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-04T08:31:56Z' class='post-time'>
                October 4, 2018,  8:31am
              </time>
              <meta itemprop='dateModified' content='2018-10-04T08:31:56Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I agree on this structure but with the margin for some flexibility.</p>
<p>For example collecting errors in <em>error.go</em> is something that is used by the community as I explore but if the package is big, collecting all errors in one place might not make that much sense. Instead we can keep them in the place they are used like if it belongs to a feature then it can be placed into that feature file.</p>
<p>I can say the same thing with errors for <em>types.go</em> file too. Collecting all the types in one place is a bit monolithic and you lose the scope what feature file it’s generated from. But if a type is not directly belong to a feature file, like if there is no a <em>New</em> function for it, I think it is valid to place it into <em>types.go</em> file.</p>
<p>I agree on having the mocks folder when it is needed of course.</p>
<p>For the implementation folder, I think it’s totally valid when you have some extra implementations and don’t want use default one defined in the root of the package folder. Let’s say we have an oauth2 middleware and there is lots of implementation of it for Google, Twitter, etc. In this case having an implementation(providers) folder does totally make sense. But having the implementation folder should not be strictly required, it depends on the needs.</p>
        </div>

        <meta itemprop='headline' content='File organization'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Anthony.html'><span itemprop='name'>Anthony</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="73.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-04T09:28:35Z' class='post-time'>
                October 4, 2018,  9:28am
              </time>
              <meta itemprop='dateModified' content='2018-10-04T09:28:35Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think this file organisation is great for some complex packages of course, just some points:</p>
<ul>
<li>we shouldn’t have this for some small packages</li>
<li>implementations can be in the same folder if we have only one implementation</li>
<li>mock package is optional (it’s just another implementation) but if we have a concrete implementation for mock separated it make sense to have the other concrete implementation in it’s own package just not to have a big mess</li>
<li>errors and types are of course optional (according to the need of them)</li>
<li>package.go (for example container.go) is required (for complex ish use packages) and should only contains abstractions only interfaces or data structs that concrete implementation will not be able to surcharge</li>
<li>package_test.go is required to describe the behavior of the package.</li>
</ul>
<p>The stuff that I like with that especially the part to have this interface and the tests associated. With that we don’t need any other tests in the implementation, we can do more tests if we want to tests some specific things that are relevant but the implementation will probably not have any test and rely on the test from the interface.</p>
<p>With that we really have something where we first think about the api and make sure that we are doing something great to use and the implementation will be really easy to validate, basically test are green so the implementation is ok</p>
        </div>

        <meta itemprop='headline' content='File organization'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='MESG Foundation'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.mesg.com/uploads/default/original/1X/81100f444852fa77ae7cd5276c5683e9a8cfc9a2.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Nicolas.html'><span itemprop='name'>Nicolas</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="73.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-05T03:43:20Z' class='post-time'>
                October 5, 2018,  3:43am
              </time>
              <meta itemprop='dateModified' content='2018-10-05T03:43:20Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Of course we need to keep flexibility to match the package requirements, this is only a guideline.</p>
<p>My main proposition is to have required interface and tests that run against the function of this interface.<br>
The goal is to separate the conception (creation of interface and tests) from the concrete implementation.</p>
<p>For <code>errors.go</code> and <code>types.go</code> I would recommend to keep them, but again, this a guideline. The main argument for this files is because of the separation of concern between the interface and the implementation.</p>
<p>I recommend to have the Errors of the package outside of the implementation. It is useful to know exactly what function return what error. We could put this information as comment of the function as I don’t see any other way.</p>
<p>The <code>types.go</code> should  <strong>not</strong> be use for the implementation types but only for the complex type that the interface could use. This struct define there should be data only (no method). Docker has a similar package: <a href="https://github.com/docker/go-docker/blob/master/api/types/types.go">https://github.com/docker/go-docker/blob/master/api/types/types.go</a>.<br>
To ensure that no methods are declared in those struct in the <code>types.go</code> file, we should force the implementation to be declare in another package (thus another folder). That’s why I suggest to put implementation in a sub- folder.</p>
        </div>

        <meta itemprop='headline' content='File organization'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
